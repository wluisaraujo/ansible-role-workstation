---
# tasks file for workstation

- name: "Adicionando Repositorios"
  dnf:
    name: "{{ item }}"
    state: latest
  loop:
    - https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-{{ansible_distribution_version}}.noarch.rpm
    - https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-{{ansible_distribution_version}}.noarch.rpm
    - http://dl.folkswithhats.org/fedora/{{ansible_distribution_version}}/RPMS/folkswithhats-release.noarch.rpm
    - http://rpm.livna.org/livna-release.rpm

- rpm_key:
    state: present
    key: /etc/pki/rpm-gpg/RPM-GPG-KEY-livna
    validate_certs: no

- sheel: dnf config-manager --add-repo "{{ item }}"
  loop:
    - https://download.docker.com/linux/fedora/docker-ce.repo

- sheel: dnf config-manager --set-enabled "{{ item }}"
  loop:    
    - docker-ce-nightly
    - fedora-cisco-openh264
    - fedora-modular
    - fedora
    - updates-modular
    - updates
    - updates-testing-modular
    - updates-testing
   
- name: "Instalar pacotes para o {{ ansible_distribution }} vers√£o {{ ansible_distribution_major_version }}"
  dnf: 
    name: "{{ item }}" 
    state: latest 
  loop:
    - ansible-lint
    - ansible-review
    - bash-completion
    - bash-completion-extras
    - bind-utils
    - bzip2
    - ccze
    - cifs-utils
    - curl
    - dnf-automatic
    - dkms
    - dropbox
    - easytag
    - ethtool
    - fedy
    - gcc
    - gedit
    - git-core
    - gnome-gmail
    - gnome-shell-extension-alternate-tab
    - gnome-shell-extension-apps-menu
    - gnome-shell-extension-background-logo
    - gnome-shell-extension-common
    - gnome-shell-extension-dash-to-dock
    - gnome-shell-extension-drive-menu
    - gnome-shell-extension-launch-new-instance
    - gnome-shell-extension-pidgin
    - gnome-shell-extension-places-menu
    - gnome-shell-extension-window-list
    - gnome-tweak-tool
    - google-chrome-stable
    - gstreamer
    - gstreamer1
    - gstreamer1-plugins-bad-free
    - gstreamer1-plugins-base
    - gstreamer1-plugins-good
    - gstreamer-ffmpeg
    - gstreamer-plugins-bad
    - gstreamer-plugins-bad-free
    - gstreamer-plugins-base
    - gstreamer-plugins-good
    - gstreamer-plugins-ugly
    - htop
    - icedtea-web
    - java
    - java-openjdk
    - keepass
    - kernel-devel
    - kernel-headers
    - kernel-modules
    - kernel-tools
    - kernel-tools-libs
    - libcurl
    - libgudev
    - libreoffice-langpack-pt-BR
    - lsof
    - make
    - mlocate
    - mtr
    - nautilus-dropbox
    - net-tools
    - nfs-utils
    - nmap
    - ntfs-3g
    - numix-gtk-theme 
    - numix-icon-theme 
    - numix-icon-theme-circle 
    - openssh-server
    - pinta
    - platform-python-dnf
    - remmina
    - remmina-plugins-rdp
    - rsync
    - screen
    - soundconverter
    - sudo
    - tcpdump
    - terminator
    - tlp 
    - tlp-rdw
    - transmission
    - tree
    - tuned
    - uget
    - unzip
    - vim
    - vlc
    - vmtouch
    - wget
    - zip
    - screenfetch   
  when: 
    - ansible_distribution == "Fedora"
    - RPMFUSIONFREE is success 
    - RPMFUSIONNOFREE is success
  register: PACKAGE

- systemd:
    state: started
    name: tuned.service
    enabled: yes
    force: yes
  ignore_errors: yes
  when: 
    - PACKAGE is success
  register: TUNED
  
- shell: tuned-adm profile throughput-performance
  when:
    - TUNED is success
...
# dnf upgrade -y 
# dnf install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm 
# dnf groupupdate core 
# dnf groupupdate multimedia sound-and-video 
# dnf install rpmfusion-free-release-tainted rpmfusion-nonfree-release-tainted
# dnf install libdvdcss \*-firmware unrar 
